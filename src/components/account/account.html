<!--account.html-->
<div class="row">
  <div class="col-md-12">
    <div class="page-header row">
      <h2 class="col-md-6">Your Account</h2>
      <h2 class="col-md-6">Favorite location</h2>
    </div>
  </div>
</div>


<div class="row">
  <div class="col-md-6">
    <form class="form-horizontal" novalidate ng-submit="vm.updateAccount()" name="editAccountForm">
      <fieldset>
        <div class="alert alert-success" ng-if="vm.status">
          <strong>Success!</strong> {{vm.status}} !
        </div>
        <div class="alert alert-danger" ng-if="vm.error">
          <strong>Arf !</strong> {{vm.error.error}} !
        </div>
        <div class="alert alert-warning" ng-if="vm.doNotMatch">
          <strong>Check it out !</strong> {{vm.doNotMatch}}
        </div>
        <div class="form-group">
          <label for="inputName" class="col-lg-3 control-label">Nom</label>
          <div class="col-lg-9">
            <input type="text"
            class="form-control"
            id="inputName"
            ng-model="vm.formData.name"
            required
            >
          </div>
        </div>
        <div class="form-group">
          <label for="inputSurname" class="col-lg-3 control-label">Prénom</label>
          <div class="col-lg-9">
            <input type="text"
            class="form-control"
            id="vm.inputSurname"
            ng-model="vm.formData.surname"
            required
            >
          </div>
        </div>
        <div class="form-group">
          <label for="inputEmail" class="col-lg-3 control-label">Email</label>
          <div class="col-lg-9">
            <input type="text"
            class="form-control"
            id="inputEmail"
            ng-model="vm.formData.username"
            >
          </div>
        </div>
        <div class="form-group">
          <label for="inputCodePostal" class="col-lg-3 control-label">Code postal</label>
          <div class="col-lg-9">
            <input type="text"
            class="form-control"
            id="inputCodePostal"
            ng-model="vm.formData.codePostal"
            >
          </div>
        </div>
        <div class="form-group">
          <label for="inputAddress" class="col-lg-3 control-label">Adresse</label>
          <div class="col-lg-9">
            <input type="text"
            class="form-control"
            id="inputAddress"
            ng-model="vm.formData.address"
            >
          </div>
        </div>
        <div class="form-group">
          <label for="inputPhoneNumber" class="col-lg-3 control-label">Numéro de téléphone</label>
          <div class="col-lg-9">
            <input type="text"
            class="form-control"
            id="inputPhoneNumber"
            ng-model="vm.formData.phoneNumber"
            >
          </div>
        </div>
        <div class="form-group">
          <label for="inputTown" class="col-lg-3 control-label">Ville</label>
          <div class="col-lg-9">
            <input type="text"
            class="form-control"
            id="inputTown"
            ng-model="vm.formData.town"
            >
          </div>
        </div>
        <div class="form-group">
          <label for="inputPassword" class="col-lg-3 control-label">Password</label>
          <div class="col-lg-9">
            <input type="password"
            class="form-control"
            id="inputPassword"
            ng-model="vm.password"
            required
            placeholder="Change Password Here">
          </div>
        </div>

        <div class="form-group">
          <label for="inputPasswordVerification" class="col-lg-3 control-label">Verifier le mot de passe</label>
          <div class="col-lg-9">
            <input type="password"
            class="form-control"
            id="inputPasswordVerification"
            ng-model="vm.passwordVerification"
            required
            placeholder="Change Password Here">
          </div>
        </div>

        <div class="form-group">
          <div class="col-lg-9 col-lg-offset-3">
            <input class="btn btn-primary" type="submit" ng-disabled="editAccountForm.$invalid" value="Update Account">
            <br/><br/>
            <button class="btn btn-danger" type="button" ng-click="vm.deleteAccount(vm.formData.username)">Delete Account</button>
          </div>
        </div>
      </fieldset>
    </form>
  </div>
  <div map-lazy-load='{{vm.googleMapUrl}}'
       class="col-md-6">
    <ng-map
      center="current-location"
      geo-fallback-center="49.8741275, 2.5389784"
      zoom="15"
      >
      <shape
        name="polyline"
        path="{{vm.path}}"
        geodesic="true"
        stroke-color="#FF0000"
        stroke-opacity="1.0"
        stroke-weight="3">
      </shape>
      <marker position="{{vm.formData.position}}" animation="BOUNCE"></marker>
        <marker ng-repeat="pin in vm.places"
          id='{{pin._id}}'
          position="{{pin.geolocation}}"
          on-click="map.showInfoWindow(pin._id)"
          ></marker>
    </ng-map>
    <br>
    <p>Votre point de livraison le plus proche est '{{vm.closestMarker.name}}'</p>
    <br>
    <form class="form-horizontal col-sm-12" novalidate ng-submit="vm.updateLivraison()" name="updateLivraisonForm">
      <div class="form-group">
        <label for="inputPlace">Choisir un nouveau point de livraison</label>
        <select
          class="form-control"
          ng-model='vm.selectedPlace'
          ng-options='place.name for place in vm.places'
          id="inputPlace">
        </select>
      </div>
      <div class="form-group">
        <input class="btn btn-primary" type="submit" ng-disabled="updateLivraisonForm.$invalid" value="Modifier mon point">
      </div>
    </form>
  </div>
</div>
<!--/account.html-->
